

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Flyer Personalizer</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Marketing Flyer Personalizer</h1>
            <p class="text-gray-600">Upload your template and personalize with exact styling specifications</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-8 max-w-7xl mx-auto">
            <!-- Input Form -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">Template & Contact Details</h2>
                
                <!-- Template Upload -->
                <div class="mb-6">
                    <label for="templateUpload" class="block text-sm font-medium text-gray-700 mb-2">Upload Flyer Template *</label>
                    <input type="file" id="templateUpload" accept="image/*" required
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <p class="text-xs text-gray-500 mt-1">Upload your 1080x1980px marketing flyer template</p>
                </div>
                
                <div class="space-y-5">
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Contact Number</label>
                        <input type="tel" id="phone" placeholder="Enter contact number" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        <div class="mt-1 text-xs text-gray-500 bg-gray-50 p-2 rounded">
                            <strong>Styling:</strong> Montserrat SemiBold, 60px, White, Position (130, 790)
                        </div>
                    </div>
                    
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" id="name" placeholder="Enter full name" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        <div class="mt-1 text-xs text-gray-500 bg-gray-50 p-2 rounded">
                            <strong>Styling:</strong> Montserrat Bold, 45px, White, UPPERCASE, Position (130, 1835)
                        </div>
                    </div>
                    
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" id="email" placeholder="Enter email address" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        <div class="mt-1 text-xs text-gray-500 bg-gray-50 p-2 rounded">
                            <strong>Styling:</strong> Montserrat Regular, 35px, White, lowercase, Position (130, 1885)
                        </div>
                    </div>
                </div>

                <div class="mt-6">
                    <button onclick="downloadFlyer()" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Download Personalized Flyer (PNG)
                    </button>
                </div>

                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <p class="text-sm text-blue-800">
                        <strong>Design Fidelity:</strong> Text will be placed at exact coordinates with identical styling to match your template perfectly. Name will be converted to UPPERCASE, email to lowercase automatically.
                    </p>
                </div>
            </div>

            <!-- Preview Area -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">Live Preview</h2>
                    <div class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded">1080 × 1980px</div>
                </div>
                
                <div class="relative bg-gray-100 rounded-lg overflow-hidden border-2 border-dashed border-gray-300" style="aspect-ratio: 1080/1980;">
                    <canvas id="flyerCanvas" width="1080" height="1980" class="w-full h-full object-contain"></canvas>
                    
                    <!-- Upload prompt overlay -->
                    <div id="uploadPrompt" class="absolute inset-0 flex flex-col items-center justify-center text-gray-500">
                        <svg class="w-16 h-16 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <p class="text-lg font-medium">Upload Your Flyer Template</p>
                        <p class="text-sm">1080 × 1980 pixels for perfect quality</p>
                    </div>
                </div>
                
                <!-- Specification Summary -->
                <div class="mt-4 grid grid-cols-1 gap-3 text-xs">
                    <div class="bg-red-50 p-3 rounded border-l-4 border-red-400">
                        <div class="font-semibold text-red-800">Contact Number Specs</div>
                        <div class="text-red-700">Position: (130, 790) • Font: Montserrat SemiBold 60px • Color: White</div>
                    </div>
                    <div class="bg-blue-50 p-3 rounded border-l-4 border-blue-400">
                        <div class="font-semibold text-blue-800">Name Specs</div>
                        <div class="text-blue-700">Position: (130, 1835) • Font: Montserrat Bold 45px • Color: White • UPPERCASE</div>
                    </div>
                    <div class="bg-green-50 p-3 rounded border-l-4 border-green-400">
                        <div class="font-semibold text-green-800">Email Specs</div>
                        <div class="text-green-700">Position: (130, 1885) • Font: Montserrat Regular 35px • Color: White • lowercase</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let canvas = document.getElementById('flyerCanvas');
        let ctx = canvas.getContext('2d');
        let templateImage = null;
        let uploadPrompt = document.getElementById('uploadPrompt');

        // Handle template upload
        document.getElementById('templateUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        templateImage = img;
                        uploadPrompt.style.display = 'none';
                        updatePreview();
                    };
                    img.src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        function calculateFontSize(text, baseFontSize, maxWidth = 820) {
            ctx.font = `${baseFontSize}px Montserrat`;
            const textWidth = ctx.measureText(text).width;
            
            if (textWidth > maxWidth) {
                const scaleFactor = maxWidth / textWidth;
                return Math.max(baseFontSize * scaleFactor, baseFontSize * 0.7); // Don't go below 70% of original
            }
            return baseFontSize;
        }

        function updatePreview() {
            if (!templateImage) return;
            
            // Clear canvas and draw template
            ctx.clearRect(0, 0, 1080, 1980);
            ctx.drawImage(templateImage, 0, 0, 1080, 1980);
            
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            
            ctx.textAlign = 'left';
            ctx.fillStyle = '#234b91'; // White color as specified
            
            // Contact number at x=130, y=790 with Montserrat SemiBold 60px
            if (phone) {
                const phoneFontSize = calculateFontSize(phone, 60);
                ctx.font = `600 ${phoneFontSize}px Montserrat`; // 600 = SemiBold
                ctx.fillText(phone, 50, 590);
            }
            
            // Name at x=130, y=1835 with Montserrat Bold 45px (UPPERCASE)
            if (name) {
                const nameText = name.toUpperCase(); // Convert to uppercase
                const nameFontSize = calculateFontSize(nameText, 45);
                ctx.font = `700 ${nameFontSize}px Montserrat`; // Bold weight
                ctx.fillStyle = '#FFFFFF';
                ctx.textAlign = 'center';
                ctx.fillText(nameText, canvas.width / 2, 1870); // Y fixed
            }

            
            // Email at x=130, y=1885 with Montserrat Regular 35px (lowercase)
            if (email) {
                const emailText = email.toLowerCase(); // Convert to lowercase
                const emailFontSize = calculateFontSize(emailText, 35); // You can keep this logic
                ctx.font = `400 ${emailFontSize}px Montserrat`; // Regular weight
                ctx.fillStyle = '#FFFFFF'; // Ensure white text if not already set
                ctx.textAlign = 'center'; // Center align text
                ctx.fillText(emailText, canvas.width / 2, 1920); // X = center of canvas
            }

        }

        function downloadFlyer() {
            if (!templateImage) {
                alert('Please upload a template first!');
                return;
            }
            
            const name = document.getElementById('name').value || 'personalized';
            const link = document.createElement('a');
            link.download = `${name.replace(/\s+/g, '_')}_marketing_flyer.png`;
            link.href = canvas.toDataURL('image/png', 1.0); // Maximum quality
            link.click();
        }

        // Auto-update preview when inputs change
        document.getElementById('name').addEventListener('input', updatePreview);
        document.getElementById('phone').addEventListener('input', updatePreview);
        document.getElementById('email').addEventListener('input', updatePreview);
    </script>
</html>
